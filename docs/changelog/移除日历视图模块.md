# 移除日历视图模块

## 变更说明

移除了日报网站中的日历视图模块，简化网站结构。

## 配置同步机制

### 自动更新

当用户保存配置时，应用会自动检查并更新用户的日报仓库：

1. **版本检查**：检查仓库中的 `.daily-version.json` 文件
2. **文件对比**：对比每个文件的版本号
3. **增量更新**：只更新有变化的文件
4. **自动清理**：删除已废弃的文件（如 calendar.md）

### 版本管理

应用使用版本号管理文件同步：

```typescript
CURRENT_VERSION = '1.0.3'
FILE_VERSIONS = {
  'site/.vitepress/config.ts': '1.0.3',
  'site/index.md': '1.0.3',
  // 移除了 'site/calendar.md'
  ...
}
```

### 清理机制

新增了自动清理功能，会删除以下已废弃的文件：
- `site/calendar.md`
- `site/calendar-simple.md`
- `site/calendar-complex.md.bak`

### 用户体验

用户无需手动操作，应用会在以下时机自动同步：
1. 首次配置时
2. 保存配置时
3. 检测到版本不匹配时

同步过程中会显示进度信息，包括：
- 更新的文件数量
- 清理的文件列表
- 同步结果

## 变更内容

### 删除的文件

- `site/calendar.md` - 日历视图页面
- `site/calendar-simple.md` - 简化版日历
- `site/calendar-complex.md.bak` - 备份文件

### 修改的文件

#### 1. site/.vitepress/config.ts

移除导航栏中的日历链接：

```typescript
// 之前
nav: [
  { text: '首页', link: '/' },
  { text: '日历', link: '/calendar' },
  { text: '归档', link: '/archive' },
  { text: '统计', link: '/stats' }
]

// 之后
nav: [
  { text: '首页', link: '/' },
  { text: '归档', link: '/archive' },
  { text: '统计', link: '/stats' }
]
```

#### 2. site/index.md

更新首页按钮链接：

```markdown
# 之前
actions:
  - theme: brand
    text: 查看最新
    link: /latest
  - theme: alt
    text: 日历视图
    link: /calendar

# 之后
actions:
  - theme: brand
    text: 查看最新
    link: /latest
  - theme: alt
    text: 归档浏览
    link: /archive
```

#### 3. README.md

更新功能列表：

```markdown
# 之前
- 📅 日历视图、归档浏览、统计分析

# 之后
- 📅 归档浏览、统计分析
- 🔒 单实例锁定，防止多窗口打开
```

#### 4. CHANGELOG.md

添加未发布的变更记录：

```markdown
## [Unreleased]

### 移除

- 移除日历视图模块，简化网站结构
```

## 变更原因

1. **简化维护**：日历视图实现复杂，维护成本高
2. **功能重复**：归档页面已经提供了按日期浏览的功能
3. **用户体验**：归档页面的列表形式更直观易用
4. **性能优化**：减少页面数量，提升网站加载速度

## 影响范围

### 用户影响

- 用户无法通过日历视图查看日报
- 可以通过归档页面按日期浏览日报
- 首页按钮改为"归档浏览"

### 开发影响

- 减少了 3 个页面文件
- 简化了导航配置
- 减少了维护工作量

## 替代方案

用户可以通过以下方式查看日报：

1. **归档页面** (`/archive`)：按日期列表显示所有日报
2. **统计页面** (`/stats`)：查看日报统计信息
3. **搜索功能**：全文搜索日报内容
4. **最新页面** (`/latest`)：查看最新的日报

## 后续优化

如果需要日期导航功能，可以考虑：

1. 在归档页面添加月份筛选
2. 在归档页面添加日期跳转
3. 优化归档页面的日期显示

## 版本信息

- 变更日期：2026-02-24
- 计划版本：v1.0.3 或下一个版本
- 变更类型：功能移除

---

**注意**：此变更不影响桌面应用功能，仅影响日报展示网站。
