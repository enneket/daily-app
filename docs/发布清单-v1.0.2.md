# v1.0.2 发布清单

## 发布前检查

- [x] 更新 `package.json` 版本号为 1.0.2
- [x] 更新 `README.md` 版本徽章
- [x] 创建版本发布文档
- [x] 构建应用成功
- [ ] 测试主要功能
- [ ] 测试新增功能（单实例锁定）
- [ ] 测试修复的问题（图标显示）

## 测试清单

### 基础功能测试

- [ ] 应用启动正常
- [ ] 配置保存和读取正常
- [ ] 日报编辑功能正常
- [ ] 日报提交到 GitHub 正常
- [ ] 日报读取功能正常

### 新功能测试

- [ ] 单实例锁定工作正常
  - [ ] 启动第一个实例成功
  - [ ] 尝试启动第二个实例时，第一个窗口获得焦点
  - [ ] 第二个实例自动退出
  - [ ] 最小化窗口后再次启动，窗口自动恢复

### Bug 修复验证

- [ ] Windows 应用图标显示正常
  - [ ] 窗口标题栏图标正确
  - [ ] 任务栏图标正确
  - [ ] Alt+Tab 切换器图标正确
- [ ] 调试日志文件生成正常
  - [ ] 日志文件位置：`%APPDATA%\DailyReport\icon-debug.log`
  - [ ] 日志内容包含图标加载信息

## 打包步骤

### 1. 构建应用

```bash
npm run build
```

### 2. 打包各平台版本

```bash
# Windows
npm run package:win

# macOS
npm run package:mac

# Linux
npm run package:linux
```

### 3. 验证打包文件

检查 `release` 目录：
- [ ] Windows 安装包存在
- [ ] 文件大小合理
- [ ] 文件名包含版本号

## Git 操作

### 1. 提交更改

```bash
git add .
git commit -m "chore: 发布 v1.0.2 版本"
```

### 2. 创建标签

```bash
git tag -a v1.0.2 -m "Release v1.0.2"
```

或使用发布脚本：
```bash
./bin/release.sh
```

### 3. 推送到远程

```bash
git push origin main
git push origin v1.0.2
```

## GitHub Release

### 1. 创建 Release

1. 访问 GitHub 仓库的 Releases 页面
2. 点击 "Draft a new release"
3. 选择标签：v1.0.2
4. 填写 Release 标题：v1.0.2 - 图标修复与单实例锁定
5. 复制 `docs/v1.0.2版本发布.md` 内容到描述框

### 2. 上传打包文件

从 `release` 目录上传：
- [ ] `DailyReport-Setup-1.0.2.exe` (Windows 安装包)
- [ ] `DailyReport-1.0.2.dmg` (macOS 安装包)
- [ ] `DailyReport-1.0.2.AppImage` (Linux AppImage)
- [ ] `daily-report-app_1.0.2_amd64.deb` (Linux Deb 包)

### 3. 发布

- [ ] 检查所有信息无误
- [ ] 点击 "Publish release"

## 发布后

### 1. 验证

- [ ] GitHub Release 页面显示正常
- [ ] 下载链接可用
- [ ] 版本号正确

### 2. 通知

- [ ] 更新项目文档
- [ ] 通知用户更新

### 3. 监控

- [ ] 关注用户反馈
- [ ] 监控 Issues
- [ ] 收集改进建议

## 回滚计划

如果发现严重问题：

1. 删除 GitHub Release
2. 删除 Git 标签：
   ```bash
   git tag -d v1.0.2
   git push origin :refs/tags/v1.0.2
   ```
3. 回退代码：
   ```bash
   git revert HEAD
   ```
4. 修复问题后重新发布

## 注意事项

1. 确保在目标平台（Windows）上测试打包后的应用
2. 检查图标文件是否正确包含在打包文件中
3. 验证单实例锁定功能在所有平台上都正常工作
4. 保留旧版本的安装包，以便用户需要时回退

## 完成标记

- [ ] 所有测试通过
- [ ] 打包文件已生成
- [ ] Git 标签已创建
- [ ] 代码已推送
- [ ] GitHub Release 已发布
- [ ] 文档已更新

---

**发布负责人**：enneket  
**发布日期**：2026-02-24  
**版本号**：v1.0.2
