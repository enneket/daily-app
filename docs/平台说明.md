# 平台说明

## 🖥️ 支持的平台

- ✅ macOS（Intel 和 Apple Silicon）
- ✅ Windows 10/11
- ✅ Linux（带图形界面）

## 🐧 Linux 注意事项

### 图形界面要求

Electron 需要 X11 或 Wayland 图形服务器才能运行。如果你在以下环境中：

- **WSL（Windows Subsystem for Linux）**：需要配置 X11 转发或使用 WSLg
- **服务器/无头环境**：无法运行 Electron 桌面应用
- **SSH 远程连接**：需要 X11 转发

### 解决方案

#### 1. WSL2 + WSLg（推荐）

Windows 11 自带 WSLg，可以直接运行图形应用：

```bash
# 确保使用 WSL2
wsl --set-version Ubuntu 2

# 直接运行
npm run dev:electron
```

#### 2. WSL1 + VcXsrv

安装 VcXsrv 并配置 DISPLAY：

```bash
export DISPLAY=:0
npm run dev:electron
```

#### 3. 使用网页模式开发

如果无法运行 Electron，可以使用网页模式开发 UI：

```bash
npm run dev
```

然后在 Windows 浏览器中打开 http://localhost:5173

**注意**：网页模式下 `window.electronAPI` 不可用，需要添加检查：

```typescript
if (window.electronAPI) {
  // Electron 环境
  await window.electronAPI.submitReport(content);
} else {
  // 浏览器环境
  console.log('浏览器模式，无法调用 Electron API');
}
```

#### 4. 在 Windows 上开发和打包

最简单的方案：在 Windows 上直接开发和打包：

```bash
# 在 Windows PowerShell 或 CMD 中
npm install
npm run dev:electron
npm run package:win
```

## 🍎 macOS 注意事项

### 首次运行

macOS 可能会提示"无法验证开发者"，需要：

1. 打开"系统偏好设置" → "安全性与隐私"
2. 点击"仍要打开"

### 打包签名

生产环境打包需要 Apple Developer 账号和代码签名证书。

## 🪟 Windows 注意事项

### 杀毒软件

某些杀毒软件可能会阻止 Electron 应用，需要添加信任。

### 打包

Windows 打包会生成 NSIS 安装程序，首次安装可能需要管理员权限。

## 🚀 推荐开发环境

### 最佳选择

1. **macOS**：原生支持，开发体验最好
2. **Windows**：原生支持，可以打包 Windows 版本
3. **Linux（桌面版）**：Ubuntu、Fedora 等桌面发行版

### 不推荐

1. **WSL1**：需要额外配置 X11
2. **服务器/无头 Linux**：无法运行图形界面
3. **Docker 容器**：除非配置了 X11 转发

## 💡 开发建议

### 如果你在 WSL 或无图形界面环境

1. **UI 开发**：使用 `npm run dev` 在浏览器中开发
2. **功能测试**：在 Windows 或有图形界面的环境中测试
3. **打包发布**：在目标平台上进行

### 跨平台开发流程

```bash
# 1. 在任何环境开发 UI
npm run dev  # 浏览器模式

# 2. 在有图形界面的环境测试
npm run dev:electron  # 桌面模式

# 3. 在目标平台打包
npm run package:mac  # 在 macOS 上
npm run package:win  # 在 Windows 上
```

## 🔧 当前环境检测

运行以下命令检测你的环境：

```bash
# 检查是否有 DISPLAY
echo $DISPLAY

# 检查 X11
which Xorg

# 检查 Wayland
echo $WAYLAND_DISPLAY
```

如果都没有输出，说明你在无图形界面环境中，只能使用网页模式开发。
