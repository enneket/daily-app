# 使用说明

## 🎯 两种运行模式

### 1. 网页模式（推荐用于快速开发和调试 UI）

```bash
npm run dev
```

- 在浏览器中运行：http://localhost:5173
- 支持热更新，修改代码立即生效
- 适合调试界面和样式
- 注意：Electron API 不可用，需要处理 `window.electronAPI` 未定义的情况

### 2. 桌面模式（完整功能）

```bash
npm run dev:electron
```

- 在 Electron 窗口中运行
- 完整的桌面应用功能
- 可以测试 GitHub API 集成
- 支持热更新（前端代码）
- 修改主进程代码需要重启

## 📝 开发流程

### 开发 UI 界面

1. 运行 `npm run dev` 启动网页模式
2. 在浏览器中实时预览和调试
3. 修改 `src/renderer/` 下的文件
4. 浏览器自动刷新

### 开发完整功能

1. 运行 `npm run dev:electron` 启动桌面模式
2. 在 Electron 窗口中测试
3. 修改前端代码会自动刷新
4. 修改主进程代码需要重启（Ctrl+C 然后重新运行）

### 调试技巧

**前端调试：**
- 桌面模式会自动打开 DevTools
- 网页模式使用浏览器的开发者工具
- 使用 `console.log()` 输出到控制台

**后端调试：**
- 在 `src/main/` 文件中使用 `console.log()`
- 输出会显示在启动 Electron 的终端中
- 查看错误信息和日志

## 🔧 常见开发场景

### 场景 1：只修改样式和布局

```bash
npm run dev
```
在浏览器中快速迭代，不需要启动 Electron。

### 场景 2：测试 GitHub API

```bash
npm run dev:electron
```
必须在桌面模式下测试，因为需要 Electron API。

### 场景 3：修改主进程逻辑

1. 修改 `src/main/` 下的文件
2. 按 Ctrl+C 停止 Electron
3. 重新运行 `npm run dev:electron`

## 📦 打包发布

### 开发完成后打包

```bash
# Mac 用户
npm run package:mac

# Windows 用户
npm run package:win

# 打包所有平台（需要在对应平台上运行）
npm run package:all
```

### 打包产物

- Mac: `release/DailyReport-1.0.0.dmg`
- Windows: `release/DailyReport Setup 1.0.0.exe`

### 测试打包后的应用

1. 找到 `release` 目录
2. 安装打包好的应用
3. 测试所有功能
4. 确认配置保存和读取正常

## 🐛 故障排除

### 问题：npm run dev:electron 启动失败

**解决方案：**
1. 确保先运行了 `npm install`
2. 检查 5173 端口是否被占用
3. 删除 `dist` 目录后重试
4. 查看终端错误信息

### 问题：修改代码不生效

**解决方案：**
- 前端代码：刷新浏览器或 Electron 窗口
- 主进程代码：重启 Electron（Ctrl+C 后重新运行）

### 问题：打包失败

**解决方案：**
1. 确保运行了 `npm run build`
2. 检查 `dist` 目录是否生成
3. 查看 electron-builder 的错误信息
4. 确认有足够的磁盘空间

## 💡 最佳实践

1. **开发阶段**：使用网页模式快速迭代 UI
2. **测试阶段**：使用桌面模式测试完整功能
3. **发布前**：在目标平台上打包并完整测试
4. **版本控制**：不要提交 `dist` 和 `release` 目录
5. **配置管理**：测试时使用专门的测试仓库

## 🚀 推荐工作流

```bash
# 1. 开发 UI（快速）
npm run dev

# 2. 测试功能（完整）
npm run dev:electron

# 3. 打包应用（发布）
npm run package:mac  # 或 package:win
```

这样可以最大化开发效率！
