# v1.1.0 更新说明

## 发布日期
2026-02-12

## 主要更新

### 🎉 新增：版本管理和自动更新机制

解决了日报仓库文件版本不同步的问题，现在应用能够自动检测并更新过期的文件。

**核心功能**：
- 自动检测日报仓库文件版本
- 智能更新过期文件（不影响日报内容）
- 清晰的更新反馈消息

**用户体验改进**：
- 无需手动删除文件即可更新
- 保存配置时自动检查和更新
- 显示更新的文件数量和版本号

### 🐛 修复：构建错误

修复了日报仓库构建时的 `Cannot read properties of undefined (reading 'day')` 错误。

**技术细节**：
- 为所有数据加载器添加了默认值
- 为所有页面添加了安全检查
- 创建了默认的 JSON 文件

## 使用方法

### 对于新用户
正常配置和使用即可，应用会自动初始化所有文件。

### 对于已有旧版本仓库的用户
1. 打开桌面应用
2. 进入设置页面
3. 点击"保存并初始化"按钮
4. 应用会自动检测并更新所有过期文件
5. 查看成功消息确认更新完成

**预期消息**：
```
配置已保存！已更新 X 个文件到最新版本 (v1.1.0)。
```

## 技术变更

### 新增文件
- `.daily-version.json` - 版本追踪文件（自动创建在日报仓库）
- `docs/版本管理和自动更新机制.md` - 详细技术文档
- `plans/2026-02-12-日报仓库文件同步修复.md` - 实施计划

### 修改文件
- `src/main/github-service.ts` - 添加版本管理逻辑
- `src/main/main.ts` - 更新 IPC 返回值
- `src/renderer/components/Settings.tsx` - 优化用户反馈

### 更新的日报仓库文件（v1.1.0）
- `site/.vitepress/config.ts`
- `site/.vitepress/reports-index.data.ts`
- `site/.vitepress/stats.data.ts`
- `site/.vitepress/reports-index.json`
- `site/.vitepress/stats.json`
- `site/index.md`
- `site/calendar.md`
- `site/archive.md`
- `site/stats.md`
- `site/latest.md`
- `scripts/generate-index.js`
- `package.json`

## 向后兼容性

✅ 完全向后兼容

- 旧版本仓库会自动升级到新版本
- 不影响已有的日报内容
- 不需要手动迁移

## 已知问题

无

## 下一步计划

- [ ] 添加"强制重新初始化"按钮（可选）
- [ ] 添加更新日志链接
- [ ] 优化版本检查性能

## 相关文档

- [版本管理和自动更新机制](./版本管理和自动更新机制.md) - 详细技术文档
- [完整使用流程](./完整使用流程.md) - 完整使用指南
- [常见问题](./常见问题.md) - 故障排除

## 反馈

如有问题或建议，请在 GitHub Issues 中反馈。
