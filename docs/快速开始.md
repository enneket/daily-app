# 快速启动指南

## 🚀 立即开始

### 0. 环境要求

- **Node.js**: 18+ 
- **图形界面**: Electron 需要图形界面（macOS、Windows、Linux 桌面版）
- **WSL 用户**: 请查看 [PLATFORM_NOTES.md](./PLATFORM_NOTES.md) 了解配置方法

### 1. 安装依赖

```bash
npm install
```

### 2. 选择运行模式

#### 网页模式（快速开发）

```bash
npm run dev
```

然后在浏览器打开 http://localhost:5173

注意：网页模式下 Electron API 不可用，需要模拟或跳过某些功能。

#### 桌面模式（完整功能）

```bash
npm run dev:electron
```

这会自动启动 Vite 开发服务器和 Electron 应用窗口。

### 3. 配置 GitHub

应用启动后会自动打开设置页面，填入：

- GitHub Token（需要 repo 权限）
- 仓库所有者（你的 GitHub 用户名）
- 仓库名称（例如：daily-reports）
- 分支名称（默认 main）

点击"测试连接"确认配置正确，然后点击"保存"。

### 4. 开始使用

配置完成后，就可以在主界面输入日报内容并提交了！

## 📦 打包桌面应用

### Mac 版本
```bash
npm run package:mac
```

### Windows 版本
```bash
npm run package:win
```

### 所有平台
```bash
npm run package:all
```

打包后的应用在 `release` 目录中。

## ⚠️ 注意事项

1. 首次运行需要下载 Electron，可能需要一些时间
2. 确保 GitHub 仓库已创建（可以是空仓库）
3. Token 需要有 `repo` 权限
4. 开发模式下会自动打开 DevTools

## 🐛 常见问题

### 问题：Electron 启动失败（Linux/WSL）

**错误信息**：`Missing X server or $DISPLAY`

**解决方案**：
1. 如果在 WSL2 + Windows 11：应该自动支持，确保 WSL 版本是最新的
2. 如果在 WSL1：需要安装 VcXsrv 并配置 DISPLAY
3. 如果在服务器：使用网页模式 `npm run dev` 开发
4. 详细说明请查看 [平台说明.md](./平台说明.md)

### 问题：npm install 很慢

解决：项目已配置国内镜像（.npmrc），如果还是很慢，可以尝试：
```bash
npm config set registry https://registry.npmmirror.com
```

### 问题：Electron 下载失败

解决：使用国内镜像：
```bash
export ELECTRON_MIRROR=https://npmmirror.com/mirrors/electron/
npm install
```

### 问题：提交失败

检查：
1. GitHub Token 是否正确
2. 仓库是否存在
3. Token 是否有 repo 权限
4. 网络连接是否正常

## 📝 开发说明

### 项目结构

- `src/main/` - Electron 主进程（Node.js 环境）
- `src/renderer/` - React 前端（浏览器环境）
- `dist/` - 编译输出目录
- `release/` - 打包输出目录

### 修改代码后

- 修改 `src/renderer/` 下的文件：Vite 会自动热更新（网页模式和桌面模式都支持）
- 修改 `src/main/` 下的文件：需要重启 Electron（按 Ctrl+C 停止，然后重新运行 `npm run dev:electron`）

### 调试

- 前端：开发模式下会自动打开 DevTools
- 后端：在 `src/main/main.ts` 中使用 `console.log()`，输出会显示在启动 Electron 的终端中

## 🎉 完成

现在你可以开始使用日报助手了！
